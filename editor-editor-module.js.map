{"version":3,"sources":["./src/app/editor/core/provider/dynamic-create-comp-init.service.ts","./src/app/editor/core/comps-libs/comps-libs.module.ts","./src/app/editor/core/comps-libs/basic/basic/basic.component.ts","./src/app/editor/core/comps-libs/basic/basic/basic.component.html","./src/app/editor/core/comps-libs/comps/elements/element.component.ts","./src/app/editor/core/comps-libs/comps/elements/element.component.html","./src/app/editor/core/comps-libs/comps/lines/line/line.component.ts","./src/app/editor/core/comps-libs/comps/lines/line/line.component.html","./src/app/editor/core/provider/uniqueid-state.service.ts","./src/app/editor/components/node-stratrgy/node-stratrgy.component.ts","./src/app/editor/components/node-stratrgy/node-stratrgy.component.html","./src/app/editor/editor.module.ts","./src/app/editor/directives/content-ref-host.directive.ts","./src/app/editor/core/comps-libs/basic/basic-style/basic-style.component.ts","./src/app/editor/core/comps-libs/basic/basic-style/basic-style.component.html","./src/app/editor/core/editor-core.module.ts","./src/app/editor/components/node-signal/node-signal.component.ts","./src/app/editor/components/node-signal/node-signal.component.html","./src/app/editor/core/comps-libs/comps/lines/svg-canvas/svg-canvas.component.ts","./src/app/editor/core/comps-libs/comps/lines/svg-canvas/svg-canvas.component.html","./src/app/editor/components/editor-content/editor-content.component.ts","./src/app/editor/components/editor-content/editor-content.component.html","./src/app/editor/core/comps-libs/no-match/no-match.component.ts","./src/app/editor/core/comps-libs/no-match/no-match.component.html","./src/app/editor/core/provider/dynamic-create-comp.service.ts"],"names":[],"mappings":"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","file":"editor-editor-module.js","sourcesContent":["import { Injectable, Component } from '@angular/core';\r\nimport * as _ from 'loadsh';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DynamicCreateCompInitService {\r\n    constructor() {\r\n\r\n    }\r\n    COMP_MODE_DATA_JSON = {\r\n      \"uniqueId\":0,\r\n      \"linkElementConfigId\":null,\r\n      \"linkConfigId\":0,\r\n      \"elementId\":0,\r\n      \"positionTop\":0,\r\n      \"positionLeft\":0,\r\n      \"expression\":\"5\",\r\n      \"nodeDTOs\":[\r\n        {\r\n          \"uniqueId\": 0,\r\n          \"nodeId\": null,\r\n          \"linkElementConfigId\": null,\r\n          \"nodeDirection\": \"right\",\r\n          \"nodeType\": \"custom\",\r\n          \"nodeIndex\": 1,\r\n          \"nodeTag\": null,\r\n          \"expression\": null,\r\n          \"segmentDTOs\": []\r\n        },\r\n        {\r\n          \"uniqueId\": 0,\r\n          \"nodeId\": null,\r\n          \"linkElementConfigId\": null,\r\n          \"nodeDirection\": \"left\",\r\n          \"nodeType\": \"custom\",\r\n          \"nodeIndex\": 1,\r\n          \"nodeTag\": null,\r\n          \"expression\": null,\r\n          \"segmentDTOs\": []\r\n        },\r\n      ]\r\n    }\r\n\r\n    initDataObject(type:string) {\r\n      let compJsonSchame = {\r\n        node: this.COMP_MODE_DATA_JSON\r\n      }\r\n      // 深度\r\n      return _.cloneDeep(compJsonSchame[type]);\r\n    }\r\n\r\n    \r\n}","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NoMatchComponent } from './no-match/no-match.component';\nimport { ElementComponent } from './comps/elements/element.component';\nimport { BasicComponent } from './basic/basic/basic.component';\nimport { LineComponent } from './comps/lines/line/line.component';\nimport { SvgCanvasComponent } from './comps/lines/svg-canvas/svg-canvas.component';\n\nconst nodeComps = [\n  ElementComponent,\n  NoMatchComponent,\n  BasicComponent,\n  LineComponent,\n  SvgCanvasComponent\n]\n@NgModule({\n  declarations: [\n    [...nodeComps]\n  ],\n  imports: [\n    CommonModule\n  ],\n  entryComponents:[\n    [...nodeComps]\n  ],\n  exports:[\n    [...nodeComps]\n  ],\n  schemas:[\n    CUSTOM_ELEMENTS_SCHEMA\n  ]\n})\nexport class CompsLibsModule { }\n","import { EventEmitter, AfterContentChecked } from '@angular/core';\nimport { AfterContentInit } from '@angular/core';\nimport { Component, Input, OnInit, Output } from '@angular/core';\nimport * as _ from 'loadsh';\n@Component({\n  selector: 'app-basic',\n  templateUrl: './basic.component.html',\n  styleUrls: ['./basic.component.scss']\n})\nexport class BasicComponent implements OnInit, AfterContentInit, AfterContentChecked {\n  isActiveBool:boolean = false;\n  @Input() compJsonSchame: any;\n  @Output() onChildComponentChange  = new EventEmitter<any>();\n  constructor() { }\n\n  ngOnInit(): void {\n\n  }\n\n  ngAfterContentInit() {\n\n  }\n  \n  ngAfterContentChecked() {\n    if(this.compJsonSchame) {\n      this.getNodesPostion(this.compJsonSchame['nodeDTOs']);\n    }\n   \n  }\n\n  getCompActiveState() {\n    if( this.compJsonSchame) {\n      this.isActiveBool = this.compJsonSchame.active\n    }\n  }\n\n  appendPixel(param:string, obj = this.compJsonSchame) {\n    if(!obj) return false;\n    return (param in obj)  && obj[param] + 'px'\n  }\n\n  // 操作元素\n  controlComp(event:MouseEvent) {\n    event.stopPropagation();\n    let item = {\n      e:event,\n      type:'element',\n      data:this.compJsonSchame\n    }\n    this.onChildComponentChange.emit(item)\n  }\n\n  // 操作节点\n  controlNode(event:MouseEvent, state:string, nodeData?:any) {\n    event.stopPropagation();\n    let item = {\n      e:event,\n      type:'node',\n      state:state,\n      nodeData:nodeData,\n      data:this.compJsonSchame\n    }\n    this.onChildComponentChange.emit(item)\n  }\n\n  // 获取节点数据\n  getNodesPostion(nodes:any[], state?:string) {\n    let nodeObjs = _.groupBy(nodes, 'nodeDirection')\n    this.getNodesPostionByDirection(nodes, nodeObjs['left'], 'left');\n    this.getNodesPostionByDirection(nodes,  nodeObjs['right'], 'right');\n  }\n\n  getNodesPostionByDirection(nodes:any[], list:any[], direction:string = 'right' || 'left') {\n    let len = list.length;\n    let perY = 20;\n    let startY = len % 2 === 0 ?  - perY * (len / 2) + 20:  - perY * (len / 2) + 20;\n    for(let i=0;i<len;i++) {\n      let node = list[i];\n      node['y']  = startY + i * perY ;\n      let nodeData = _.find(nodes, {\n        uniqueId: node.uniqueId\n      });\n      if(nodeData) {\n        nodeData['y'] = node['y'];\n      }\n    }\n    this.compJsonSchame['nodeDTOs'][direction] = list;\n  }\n\n\n\n\n}\n","<p>basic works!</p>\n","import { Component, OnInit } from '@angular/core';\nimport { BasicComponent } from '../../basic/basic/basic.component';\n\n@Component({\n  selector: 'app-element',\n  templateUrl: './element.component.html',\n  styleUrls: ['./element.component.scss']\n})\nexport class ElementComponent extends BasicComponent implements OnInit {\n  width:number = 100;\n  height:number = 30;\n  constructor() {\n    super()\n  }\n\n  ngOnInit(): void {\n    this.getCompActiveState();\n  }\n\n  drawLine() {\n    \n  }\n\n}\n","<div class=\"libs-node\" \n    *ngIf=\"compJsonSchame\"\n    draggable=\"true\" \n    (click)=\"controlComp($event)\" \n    (dragstart)=\"controlComp($event)\"\n    (dragend)=\"controlComp($event)\" [ngClass]=\"{\n        active:compJsonSchame && compJsonSchame.active\n    }\" [ngStyle]=\"{\n        top:appendPixel('positionTop'),\n        left:appendPixel('positionLeft')\n    }\">\n    <span class=\"name\">{{compJsonSchame && compJsonSchame.expression.name || \"元素\"}}</span>\n\n    <div class=\"bef-nodes\"> \n        <span *ngFor=\"let node of compJsonSchame['nodeDTOs']['left'];index as i;\"\n            class=\"bef-node node\" \n            [ngClass]=\"{\n                nextNodeActive:node.nextNodeactive,\n                befNodeActive:node.befNodeActive\n            }\"\n            draggable=\"true\" \n            [ngStyle]=\"{\n                top:appendPixel('y', node)\n            }\"\n            (dragstart)=\"controlNode($event, 'input', node)\"\n            (drag)=\"controlNode($event, 'input', node)\"\n            (dragend)=\"controlNode($event, 'input', node)\"></span>\n    </div>\n    <div class=\"next-nodes\" > \n        <span *ngFor=\"let node of compJsonSchame['nodeDTOs']['right'];index as i;\"\n            class=\"next-node node\" \n            [ngClass]=\"{\n                nextNodeActive:node.nextNodeactive,\n                befNodeActive:node.befNodeActive\n            }\"\n            draggable=\"true\" \n            [ngStyle]=\"{\n                top:appendPixel('y', node)\n            }\"\n            (dragstart)=\"controlNode($event, 'output', node)\"\n            (drag)=\"controlNode($event, 'output', node)\"\n            (dragend)=\"controlNode($event, 'output', node)\">\n        </span>\n    </div>\n</div>","import { AfterContentChecked } from '@angular/core';\nimport { Component, OnInit } from '@angular/core';\nimport * as _ from 'loadsh';\n\n@Component({\n  selector: 'app-line',\n  templateUrl: './line.component.html',\n  styleUrls: ['./line.component.scss']\n})\nexport class LineComponent implements OnInit , AfterContentChecked{\n  elements:any[];\n  nodeDTOs:any[];\n  segmentDTOs:any[];\n  H:30;\n  W:100;\n  LAB:10;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.initData();\n    this.getData();\n    this.appendLinesInfo();\n  }\n\n\n  ngAfterContentChecked() {\n    this.initData();\n    this.getData();\n    this.appendLinesInfo();\n  }\n\n  initData() {\n    this.nodeDTOs = [];\n    this.segmentDTOs = [];\n  }\n\n  getData() {\n    let len = this.elements.length;\n    for(let i=0;i<len;i++) {\n      let element = this.elements[i];\n      this.getNodeDTOs(element);\n    }\n  }\n\n  getNodeDTOs(ele:any) {\n    let nodeDTOs = ele['nodeDTOs'] || [];\n    let len = nodeDTOs.length;\n    for(let i=0;i<len;i++) {\n      let nodeDTO = nodeDTOs[i];\n      nodeDTO['positionLeft'] = ele['positionLeft'];\n      nodeDTO['positionTop'] = ele['positionTop'];\n      this.nodeDTOs.push(nodeDTO);\n      this.getSegmentDTOs(nodeDTO);\n    }\n  }\n\n  getSegmentDTOs(nodeDTO:any) {\n    let segmentDTOs = nodeDTO['segmentDTOs'] || [];\n    let len = segmentDTOs.length;\n    for(let i=0;i<len;i++) {\n      let segmentDTO = segmentDTOs[i];\n      this.segmentDTOs.push(segmentDTO);\n    }\n  }\n\n  appendLinesInfo() {\n    let nodes = _.cloneDeep(this.nodeDTOs);\n    let lines_len = this.segmentDTOs.length;\n    for(let i=0;i<lines_len;i++) {\n      let line = this.segmentDTOs[i];\n      let sNode = _.find(nodes, {\n        uniqueId: line.inputNodeUniqueId\n      });\n      let eNode = _.find(nodes, {\n        uniqueId: line.outputNodeUniqueId\n      })\n      console.log(!!eNode, !!sNode)\n      if(!!sNode && !!eNode) {\n        line['x1'] = sNode['positionLeft'] + 76;\n        line['y1'] = sNode['positionTop'] +  sNode.y + 10;\n        line['x2'] = eNode['positionLeft'] - 12;\n        line['y2'] = eNode['positionTop']  + eNode.y + 10;\n        let _minddle_x = (line.x1 + line.x2 ) /2;\n        line['d']=`M ${line.x1},${line.y1} C ${_minddle_x},${line.y1} ${_minddle_x},${line.y2} ${ line.x2},${line.y2}`\n      }else {\n        line['DelBool']  = true;\n      }\n    }\n\n    _.remove(this.segmentDTOs, line => {\n      return line.DelBool === true \n    })\n\n  }\n\n}\n","<svg width=\"1000px\" height=\"700px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path  *ngFor=\"let line of segmentDTOs\" \n        class=\"line\" \n        [attr.d]=\"line.d\" \n        style=\"stroke:#4988fe; stroke-width:1px;fill:none; \"/>\n</svg>","import { Injectable, Component } from '@angular/core';\r\nimport { maxBy , cloneDeep} from 'loadsh';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CompUniqueIdStateService {\r\n    ELEMENT_UNIQUE_ID:number =  10000;\r\n    NODE_UNIQUE_ID:number = 40000;\r\n    LINE_UNIQUE_ID:number = 60000;\r\n\r\n    constructor() { }\r\n\r\n    elementUniqueIdState(comps:any[] = []) {\r\n        // let len = comps.length;\r\n        // if(!len) return this.ELEMENT_UNIQUE_ID;\r\n        // let currentMaxId = maxBy(cloneDeep(comps), 'uniqueId');\r\n        // let nextId = ++currentMaxId['uniqueId'];\r\n        // return nextId || this.ELEMENT_UNIQUE_ID;\r\n        return uuidv4();\r\n    }\r\n\r\n    nodeUniqueIdState(comps:any[] = [], index) {\r\n        // let len = comps.length;\r\n        // let nodes = [];\r\n        // for(let i=0;i<len;i++) {\r\n        //     let element = comps[i];\r\n        //     for(let j=0;j<element.nodeDTOs.length;j++) {\r\n        //         let item = element.nodeDTOs[j];\r\n        //         nodes.push(item);\r\n        //     }\r\n        // }\r\n        // let currentMaxId = maxBy(cloneDeep(nodes), 'uniqueId');\r\n        // let nextId = ++currentMaxId['uniqueId'] + index;\r\n        // return nextId || this.NODE_UNIQUE_ID;\r\n        return uuidv4();\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-node-stratrgy',\n  templateUrl: './node-stratrgy.component.html',\n  styleUrls: ['./node-stratrgy.component.scss']\n})\nexport class NodeStratrgyComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>node-stratrgy works!</p>\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ContentRefHostDirective } from './directives/content-ref-host.directive';\nimport { EditorCoreModule } from './core/editor-core.module';\nimport { EditorContentComponent } from './components/editor-content/editor-content.component';\nimport { NodeStratrgyComponent } from './components/node-stratrgy/node-stratrgy.component';\nimport { NodeSignalComponent } from './components/node-signal/node-signal.component';\n\nconst routes: Routes = [\n  { \n    path: '', \n    component: EditorContentComponent\n  }\n];\n\n@NgModule({\n  declarations: [\n    EditorContentComponent,\n    ContentRefHostDirective,\n    NodeStratrgyComponent,\n    NodeSignalComponent\n  ],\n  exports:[\n\n  ],\n  imports: [\n    CommonModule,\n    EditorCoreModule,\n    RouterModule.forChild(routes)\n  ],\n  schemas:[\n    CUSTOM_ELEMENTS_SCHEMA\n  ]\n})\nexport class EditorModule { }\n","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[appContentRefHost]'\n})\nexport class ContentRefHostDirective {\n\n  constructor(\n    public viewContainerRef: ViewContainerRef\n  ) { }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-basic-style',\n  templateUrl: './basic-style.component.html',\n  styleUrls: ['./basic-style.component.scss']\n})\nexport class BasicStyleComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>basic-style works!</p>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CompsLibsModule } from './comps-libs/comps-libs.module';\nimport { DynamicCreateCompService } from './provider/dynamic-create-comp.service';\nimport { DynamicCreateCompInitService } from './provider/dynamic-create-comp-init.service';\nimport { BasicStyleComponent } from './comps-libs/basic/basic-style/basic-style.component';\nimport { CompUniqueIdStateService } from './provider/uniqueid-state.service';\n@NgModule({\n  declarations: [\n  BasicStyleComponent],\n  imports: [\n    CommonModule,\n    CompsLibsModule,\n  ],\n  providers:[\n    DynamicCreateCompService,\n    DynamicCreateCompInitService,\n    CompUniqueIdStateService\n  ]\n})\nexport class EditorCoreModule { }\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-node-signal',\n  templateUrl: './node-signal.component.html',\n  styleUrls: ['./node-signal.component.scss']\n})\nexport class NodeSignalComponent implements OnInit {\n\n  datas:any[];\n  @Output() createComp = new EventEmitter();\n  @Output() displayComp = new EventEmitter();\n  \n  constructor() { \n\n  }\n\n  ngOnInit(): void {\n    this.getData();\n  }\n\n  getData() {\n    this.datas = [{\n      id:1,\n      name:\"空调001\",\n      deviceId:10001,\n      type:'device',\n      child:[{\n          id:1,\n          name:\"温度\",\n          currentVal:\"23.8\",\n          state:0,\n          type:'signal'\n        },{\n          id:2,\n          name:\"湿度\",\n          currentVal:\"11\",\n          state:0,\n          type:'signal'\n        },{\n          id:3,\n          name:\"电压\",\n          currentVal:\"11\",\n          state:0,\n          type:'signal'\n        },{\n          id:4,\n          name:\"电流\",\n          currentVal:\"11\",\n          state:0,\n          type:'signal'\n        }\n      ]\n    }]\n  }\n\n\n  dragCreateComp(event:MouseEvent,item:any ) {\n    let compData = {\n      event:event,\n      expression:item\n    }\n    this.createComp.emit(compData);\n  }\n\n}\n","<div class=\"node-signal \">\n    <div class=\"title\">\n        <span class=\"tit\">\n            设备列表\n        </span>\n    </div>\n    <ul class=\"list\">\n        <li class=\"item\" *ngFor=\"let item of datas; index as i;\">\n            <span class=\"name\">{{item.name}}</span>\n            <ul class=\"sub-list\" *ngIf=\"item.child && item.child.length\">\n                <li class=\"sub-item\" *ngFor=\"let sub of item.child; index as subi;\">\n                    <span class=\"line\"></span>\n                    <span class=\"sub-name dragBool\"  \n                        draggable=\"true\" \n                        (dragend)=\"dragCreateComp($event, sub)\"\n                        >{{sub.name}}</span>       \n                </li>\n            </ul>\n        </li>\n    </ul>\n</div>","import { Component, OnInit, AfterContentChecked } from '@angular/core';\n\n@Component({\n  selector: 'app-svg-canvas',\n  templateUrl: './svg-canvas.component.html',\n  styleUrls: ['./svg-canvas.component.scss']\n})\nexport class SvgCanvasComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<svg width=\"1000px\" height=\"700px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <line x1=\"180\" y1=\"115\" x2=\"186\" y2=\"315\" style=\"stroke:#4988fe; stroke-width:1px; \"></line>\n</svg>","import { AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, Component, ComponentFactoryResolver, OnInit, ViewChild } from '@angular/core';\nimport { DynamicCreateCompInitService } from '../../core/provider/dynamic-create-comp-init.service';\nimport { DynamicCreateCompService } from '../../core/provider/dynamic-create-comp.service';\nimport { ContentRefHostDirective } from '../../directives/content-ref-host.directive';\nimport * as _ from 'loadsh'\nimport { CompUniqueIdStateService } from '../../core/provider/uniqueid-state.service';\nimport { EventManager } from '@angular/platform-browser';\nimport { LineComponent } from '../../core/comps-libs/comps/lines/line/line.component';\nimport { cloneDeep } from 'loadsh';\n@Component({\n  selector: 'app-editor-content',\n  templateUrl: './editor-content.component.html',\n  styleUrls: ['./editor-content.component.scss']\n})\nexport class EditorContentComponent implements OnInit, AfterContentInit, AfterContentChecked {\n  currentViewContRef: any; // 当前的组件容器\n  currentPageNodes: any[]; // 页面元素jsonSchame列表\n  currentPageComps: any[]; // 页面元素列表\n  currentActiveNode: any;\n  activeCompInstance: any;\n  activeCompState_index: number;\n  activeCompState_comp: any;\n  activeCompState_drag_sx: number; // 拖拽开始位置x\n  activeCompState_drag_sy: number; // 拖拽开始位置y\n  compDefType: string = 'node';\n\n  @ViewChild(ContentRefHostDirective, { static: true }) viewContRef: ContentRefHostDirective;  // 当前的组件\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private dynamicCreateCompService: DynamicCreateCompService,\n    private initCompDataService: DynamicCreateCompInitService,\n    private uniqueidStateService: CompUniqueIdStateService,\n    private eventManager:EventManager\n  ) {\n\n  }\n\n  ngOnInit(): void {\n    this.initData();\n  }\n\n  initData() {\n    this.activeCompState_index = 0;\n    this.currentPageNodes =[{\n      \"uniqueId\":20,\n      \"linkElementConfigId\":null,\n      \"linkConfigId\":0,\n      \"elementId\":0,\n      \"positionTop\":100,\n      \"positionLeft\":100,\n      \"expression\":\"5\",\n      \"nodeDTOs\":[\n        {\n          \"uniqueId\": 10000,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"right\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        },\n        {\n          \"uniqueId\": 10001,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"left\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        },\n      ]\n    },{\n      \"uniqueId\":10,\n      \"linkElementConfigId\":null,\n      \"linkConfigId\":0,\n      \"elementId\":0,\n      \"positionTop\":200,\n      \"positionLeft\":200,\n      \"expression\":\"5\",\n      \"nodeDTOs\":[\n        {\n          \"uniqueId\": 10002,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"right\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        }, {\n          \"uniqueId\": 10006,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"right\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        },\n        {\n          \"uniqueId\": 10003,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"left\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        }, {\n          \"uniqueId\": 10004,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"left\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        }, {\n          \"uniqueId\": 10005,\n          \"nodeId\": null,\n          \"linkElementConfigId\": null,\n          \"nodeDirection\": \"right\",\n          \"nodeType\": \"custom\",\n          \"nodeIndex\": 1,\n          \"nodeTag\": null,\n          \"expression\": null,\n          \"segmentDTOs\": []\n        },\n      ]\n    }\n  ]}\n\n  ngAfterContentInit() {\n    this.currentViewContRef = this.viewContRef.viewContainerRef;\n    this.initRendeComps();\n    this.initRenderLineComp();\n    this.addLister();\n  }\n\n  addLister() {\n    this.eventManager.addGlobalEventListener('window', 'keydown', event => {\n      if(event.code === 'Delete') {\n        _.remove(this.currentPageNodes, node => {\n          return node.active === true \n        })\n        this.reRenderComp();\n        this.activeCompState_index = -1;\n      }\n    })\n  }\n\n  reRenderComp() {\n    let len = this.currentPageNodes.length;\n    for(let i=0;i<len;i++) {\n      this.currentViewContRef.clear(i)\n    }\n    this.initRendeComps();\n    this.initRenderLineComp();\n  }\n\n  ngAfterContentChecked() {\n\n  }\n\n  getContentBoundingClinetRect() {\n    let dom = document.getElementById(\"content\");\n    let rect = dom.getBoundingClientRect();\n    return rect;\n  }\n\n  creatCompByDrag(createCompData: any) {\n    this.initState();\n    let expressionData = createCompData.expression;\n    let event = createCompData.event;\n    this.addComponent(event, expressionData)\n  }\n\n  // 通过拖拽创建新组件\n  addComponent(event: MouseEvent, expressionData: any, compType: string = this.compDefType) {\n    let _compType = compType;// 获取创建组件的类型\n    let addCompJsonData = this.initCompDataService.initDataObject(_compType);\n    if (event) {\n      this.initPagesCompState();\n      let domContentRect = this.getContentBoundingClinetRect();\n      addCompJsonData['positionLeft'] = event.clientX - domContentRect.x;\n      addCompJsonData['positionTop'] = event.clientY - domContentRect.y;\n      addCompJsonData['expression'] = expressionData;\n      // update state\n      addCompJsonData['active'] = true;\n      addCompJsonData['uniqueId'] = this.uniqueidStateService.elementUniqueIdState(this.currentPageNodes);\n      let nodeLen = addCompJsonData.nodeDTOs.length;\n      for(let i=0;i<nodeLen;i++) {\n        let node = addCompJsonData.nodeDTOs[i];\n        node.uniqueId = this.uniqueidStateService.nodeUniqueIdState(this.currentPageNodes, i);\n      }\n\n    }\n\n    this.currentPageNodes.push(addCompJsonData);\n    this.activeCompState_index = this.currentPageNodes.length - 1;\n    this.renderComponent(_compType);\n  }\n\n  initPagesCompState() {\n    let len = this.currentPageNodes.length;\n    for (let i = 0; i < len; i++) {\n      let compJsonSchame = this.currentPageNodes[i];\n      compJsonSchame.active = false;\n    }\n  }\n\n  initRendeComps() {\n    let len = this.currentPageNodes.length;\n    for (let i = 0; i < len; i++) {\n      this.renderComponent('node', i);\n    }\n  }\n\n  initRenderLineComp(){\n    let comp = LineComponent\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(comp);\n    let compRef = this.currentViewContRef.createComponent(componentFactory);\n    let compInstance = compRef.instance;\n    (<any>compInstance).elements = this.currentPageNodes;\n  }\n\n  renderComponent(compType: string = 'node', currentIndex?:number, componnet?:any) {\n    let compIndex = currentIndex || this.activeCompState_index;\n    let compJsonSchame = this.currentPageNodes[compIndex]\n    let comp = this.dynamicCreateCompService.getComponentByType(compType); // 声明一个组件\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(comp); // 实例化一个组价\n    let compRef = this.currentViewContRef.createComponent(componentFactory); // 动态创建一个组件\n    let compInstance = compRef.instance;\n    (<any>compInstance).compJsonSchame = compJsonSchame;\n    (compInstance).onChildComponentChange.subscribe(event => {\n      if (event && event.data) {\n        let type = event.type;\n        if(type === 'element') {\n          this.elementComponentChange(event);\n        }else if(type === 'node') {\n          this.nodeComponentChange(event);\n        }\n\n      }\n    })\n  }\n\n  nodeComponentChange(event:any) {\n    let domContentRect = this.getContentBoundingClinetRect();\n    let _x = event.e.clientX - domContentRect.x;\n    let _y = event.e.clientY - domContentRect.y;\n    let _nodeData = event.nodeData;\n    if(!_nodeData) return;\n    let _direction = _nodeData.nodeDirection;\n    let _currenComp = event.data;\n\n    let elements = this.currentPageNodes;\n    let len = elements.length;\n    let eType = event.e.type;\n    if(eType ==='dragstart') {\n      _nodeData.befNodeActive = true;\n      console.log(_direction, event.state)\n    }else if(eType === 'dragend') {\n      _nodeData.befNodeActive = false\n    }\n    for(let i=0;i<len;i++) {\n      let element = elements[i];\n      if(element['uniqueId'] === _currenComp['uniqueId']) {\n        continue;\n      }\n      let _left = element['positionLeft'];\n      let _top = element['positionTop'];\n      let _pending = 10;\n      let _nodes = _.groupBy(element.nodeDTOs, 'nodeDirection')[_direction === 'right' ? \"left\" :'right'];\n      let _len = _nodes.length;\n      let _offsetY = 5;\n      let _offsetX = 10;\n      for(let i=0;i<_len;i++) {\n        let _node = _nodes[i];\n        _top  += _node.y;\n        if(event.state === 'output') {\n          if(_x >= _left - _offsetX - _pending && _x <= _left - _offsetX + _pending && _y >= _top + _offsetY - _pending && _y <= _top + _offsetY+ _pending) {\n            if(eType === 'dragend'){\n              _node.nextNodeactive = false;\n              if(_node) {\n                _node.y = _nodeData.y;\n              }\n              this.appendLine(_node, _nodeData,  _nodeData.segmentDTOs);\n              return;\n            }else {\n              _node.nextNodeactive = true;\n            }\n          }else {\n            if(_node.nextNodeactive) {\n              _node.nextNodeactive = false;\n            }\n          }\n        } else if(event.state === 'input') {\n          let _width = 70;\n          _pending  = 15;\n          if(_x >= _left - _offsetX + _width -  _pending \n              && _x <= _left - _offsetX + _width +  _pending \n              && _y >= _top + _offsetY - _pending \n              && _y <= _top + _offsetY+ _pending) {\n            if(eType === 'dragend'){\n              _node.nextNodeactive = false;\n              if(_node) {\n                _node.y = _nodeData.y;\n              }\n              this.appendLine(_nodeData, _node,  _node.segmentDTOs);\n              return;\n            }else {\n              _node.nextNodeactive = true;\n            }\n          }else {\n            if(_node.nextNodeactive) {\n              _node.nextNodeactive = false;\n            }\n          }\n        }\n      }\n\n   \n    }\n  }\n\n  appendLine( nextNode, befNode, segmentDTOs:any[]) {\n    if(befNode && nextNode) {\n      let line = {\n        \"segmentId\": null,\n        \"inputLinkElementConfigId\": null,\n        \"inputNodeId\": null,\n        \"inputNodeUniqueId\": befNode.uniqueId,\n        \"outputLinkElementConfigId\": null,\n        \"outputNodeId\": null,\n        \"outputNodeUniqueId\": nextNode.uniqueId\n      }\n      segmentDTOs.push(line)\n    }\n  }\n\n  elementComponentChange(event:any) {\n    let compJson = event.data;\n    this.initPagesCompState();\n    let _eType = event!.e!.type;\n    if (_eType === 'click') {\n      this.activeCompState_drag_sx = event.e.clientX;\n      this.activeCompState_drag_sy = event.e.clientY;\n    } else if (_eType === 'dragstart') {\n      this.activeCompState_drag_sx = event.e.clientX;\n      this.activeCompState_drag_sy = event.e.clientY;\n    } else if (_eType === 'dragend') {\n      let _cx = event.e.clientX;\n      let _cy = event.e.clientY;\n      let _x = _cx - this.activeCompState_drag_sx;\n      let _y = _cy - this.activeCompState_drag_sy;\n      compJson['positionLeft'] += _x;\n      compJson['positionTop'] += _y;\n    }\n    event.data.active = true;\n  }\n\n  initState() {\n    this.activeCompState_index = -1;\n  }\n\n  drawNodeDTOs(compJsonSchame:any) {\n    let nodeDTOs = compJsonSchame.nodeDTOs || [];\n    let len = nodeDTOs.length;\n    for(let i=0;i<len;i++) {\n      let nodeDTO = nodeDTOs[i];\n      this.drawSegmentDTOs(nodeDTO)\n    }\n  }\n\n  drawSegmentDTOs(nodeDTO:any) {\n    let segmentDTOs = nodeDTO!.segmentDTOs || [];\n    let len = segmentDTOs.length;\n    for(let i=0;i<len;i++) {\n      let segmentDTO = segmentDTOs[i];\n      this.drawSegmentDTO(segmentDTOs)\n    }\n  }\n\n  drawSegmentDTO(segment) {\n    console.log(segment)\n  }\n}\n","<div id=\"editor-content\">\n    <app-node-signal \n        (createComp)=\"creatCompByDrag($event)\" \n        class=\"item\"></app-node-signal>\n    <div id=\"content\" class=\"item content\">\n        <ng-template appContentRefHost #contentComp ></ng-template>\n    </div>\n    <app-node-stratrgy class=\"item\"></app-node-stratrgy>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-no-match',\n  templateUrl: './no-match.component.html',\n  styleUrls: ['./no-match.component.scss']\n})\nexport class NoMatchComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>no-match works!</p>\n","import { Injectable, Component } from '@angular/core';\nimport { NoMatchComponent } from '../comps-libs/no-match/no-match.component';\nimport { ElementComponent } from '../comps-libs/comps/elements/element.component';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DynamicCreateCompService {\n\n  constructor() { }\n\n  getComponentByType(type:string) {\n    let comp;\n    switch(type) {\n      case 'node':\n        comp = ElementComponent;\n        break;\n      default:\n        comp = NoMatchComponent;\n    }\n    return comp;\n  }\n\n  getDefultComponent() {\n    return NoMatchComponent\n  }\n}\n"],"sourceRoot":"webpack:///"}